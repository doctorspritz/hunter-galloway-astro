---
/**
 * HeroWidget Component
 * Hunter Galloway Design System - Section Component
 * 
 * Flexible hero widget component matching WordPress pattern exactly.
 * Supports multiple variants: professional, general, calculator-focused.
 * Used across 7+ pages: doctors, nurses, suburb, posts, covid, refinance.
 */

import type { HeroWidgetProps } from './HeroWidget.types';
import Button from '../atoms/Button/Button.astro';

interface Props extends HeroWidgetProps {}

const {
  variant = 'general',
  title,
  subtitle,
  description,
  buttonText = 'Get a Free Assessment',
  buttonHref = '#',
  bottomText = 'We promise to get back to you within 4 business hours',
  backgroundImage,
  class: additionalClasses = '',
} = Astro.props;

// Determine background image based on variant if not provided
const getBackgroundImage = (variant: string, customImage?: string): string => {
  if (customImage) return customImage;
  
  const images = {
    professional: '/images/doctors-hero.jpg',
    nurse: '/images/nurse-hero.jpg', 
    general: '/images/post_hero.jpg',
    calculator: '/images/coronavirus-hero.jpg',
    refinance: '/images/post_hero.jpg', // Uses general hero by default
  };
  
  return images[variant as keyof typeof images] || images.general;
};

const heroImage = getBackgroundImage(variant, backgroundImage);

// Build CSS classes
const heroClasses = [
  'hero_widget',
  'widget',
  additionalClasses,
].filter(Boolean).join(' ');
---

<section class={heroClasses}>
  <div class="container">
    <div class="inner_widget">
      <h1 class="hero_title">{title}</h1>
      {subtitle && (
        <p class="hero_subtitle" set:html={subtitle} />
      )}
      {description && (
        <p class="hero_text" set:html={description} />
      )}
      <div class="btn_wrap">
        <Button 
          href={buttonHref}
          variant="primary"
          fullWidth={true}
          class="rc_open A-trigger"
        >
          {buttonText}
        </Button>
      </div>
      {bottomText && (
        <p class="hero_text bottom-text">{bottomText}</p>
      )}
    </div>
  </div>
</section>

<style define:vars={{
  heroBackgroundImage: `url('${heroImage}')`,
}}>
/* Hero Widget - Exact WordPress Implementation */
.hero_widget {
  background: var(--heroBackgroundImage) no-repeat scroll center;
  background-size: cover;
  background-color: #000000;
  position: relative;
  padding: 50px 0 125px;
}

.hero_widget:after {
  content: '';
  background: rgba(4, 3, 3, 0.7);
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 0;
}

.hero_widget .inner_widget {
  text-align: center;
  position: relative;
  padding: 0 15px;
  z-index: 1;
}

.hero_widget .hero_title {
  color: #fff;
  font-family: var(--hg-font-family);
  font-weight: var(--hg-font-weight-black);
  font-size: 40px;
  padding-bottom: 30px;
  margin: 0;
  line-height: 1.2;
}

.hero_widget .hero_subtitle {
  color: #fff;
  font-family: var(--hg-font-family);
  font-weight: var(--hg-font-weight-black);
  font-size: 20px;
  padding-bottom: 40px;
  max-width: 840px;
  margin: 0 auto;
  line-height: 1.6;
}

.hero_widget .hero_text {
  color: #fff;
  font-family: var(--hg-font-family);
  font-size: 17px;
  padding-bottom: 43px;
  margin: 0 auto;
  line-height: 1.4;
}

.hero_widget .btn_wrap {
  margin: 0 auto;
  width: 370px;
  max-width: 100%;
  padding-bottom: 15px;
}

/* Button atom handles all button styling now */

.hero_widget .bottom-text {
  font-size: 15px;
  padding-bottom: 0;
}

/* Mobile Responsive - WordPress Pattern */
@media screen and (max-width: 767px) {
  .hero_widget {
    padding: 15px 0 25px;
  }
  
  .hero_widget .inner_widget {
    text-align: left;
  }
  
  .hero_widget .hero_title {
    font-size: 28px;
    padding-bottom: 20px;
  }
  
  .hero_widget .hero_subtitle {
    font-size: 18px;
    line-height: 1.3;
    padding-bottom: 25px;
  }
  
  .hero_widget .hero_text {
    font-size: 16px;
    padding-bottom: 25px;
  }
  
  .hero_widget .btn_wrap {
    max-width: 342px;
    width: auto;
  }
  
  .hero_widget .bottom-text {
    text-align: center;
    font-size: 14px;
  }
}

/* Tablet Responsive */
@media screen and (min-width: 768px) and (max-width: 1024px) {
  .hero_widget {
    padding: 35px 0 75px;
  }
  
  .hero_widget .hero_title {
    font-size: 36px;
  }
  
  .hero_widget .hero_subtitle {
    font-size: 19px;
  }
}

/* Large Desktop */
@media screen and (min-width: 1200px) {
  .hero_widget {
    padding: 60px 0 140px;
  }
  
  .hero_widget .hero_title {
    font-size: 44px;
    padding-bottom: 35px;
  }
  
  .hero_widget .hero_subtitle {
    font-size: 22px;
    padding-bottom: 45px;
  }
}
</style>