---
/**
 * WhyChooseWidget Component
 * Hunter Galloway Design System - Section Component
 * 
 * A widget for displaying why choose us benefits with 3-column layout.
 * Used across 7+ pages for trust-building content.
 * Built to match the WordPress why_choose_widget pattern exactly.
 */

import type { WhyChooseWidgetProps } from './WhyChooseWidget.types';
import BenefitCard from '../../molecules/BenefitCard/BenefitCard.astro';
import Button from '../../atoms/Button/Button.astro';
import { semantic } from '../../../tokens/semantic';

interface Props extends WhyChooseWidgetProps {}

const {
  title,
  benefits,
  buttonText = 'Get a Free Assessment',
  buttonHref = '#',
  variant = 'default',
  class: additionalClasses = '',
} = Astro.props;

// Build CSS classes based on props
const sectionClasses = [
  'why_choose',
  'why_choose_widget', 
  'widget',
  `why-choose-widget--${variant}`,
  additionalClasses,
].filter(Boolean).join(' ');
---

<section class={sectionClasses}>
  <div class="container">
    <div class="why_choose_title">{title}</div>
    
    <div class="why_choose_blocks">
      <div class="why_choose_blocks_inner">
        {benefits.map((benefit) => (
          <BenefitCard {...benefit} />
        ))}
      </div>
    </div>
    
    {buttonText && buttonHref && (
      <div class="btn_wrap">
        <Button 
          href={buttonHref}
          variant="primary"
          class="btn_yellow"
        >
          {buttonText}
        </Button>
      </div>
    )}
  </div>
</section>

<style define:vars={{
  surfaceSecondary: semantic.color.surface.secondary,
  surfaceTertiary: semantic.color.surface.tertiary,
  textPrimary: semantic.color.text.primary,
  textInverse: semantic.color.text.inverse,
  fontSize4xl: semantic.typography.size['4.5xl'], // WordPress "ultimate choice" (40px)
  fontWeightDisplay: semantic.typography.weight.display, // 900 - WordPress exact
  lineHeightTight: semantic.typography.lineHeight.tight, // 110% - WordPress exact
  spaceLg: semantic.space.lg,
  spaceXl: semantic.space.xl,
  space2xl: semantic.space['2xl'],
  space3xl: '110px', // WordPress exact bottom margin for title
}}>
/* WhyChooseWidget component styles - WordPress exact implementation */
.why_choose_widget {
  padding: 35px 0 0; /* WordPress exact padding */
  margin-bottom: 80px; /* WordPress exact margin */
}

.why_choose_title {
  font-size: var(--fontSize4xl); /* 40px - WordPress exact */
  font-weight: var(--fontWeightDisplay); /* 900 - WordPress exact */
  color: var(--textPrimary);
  line-height: var(--lineHeightTight); /* 110% - WordPress exact */
  margin-bottom: var(--space3xl); /* 110px - WordPress exact */
  text-align: center;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.why_choose_blocks {
  margin-bottom: var(--spaceXl);
}

.why_choose_blocks_inner {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spaceLg);
  justify-content: center;
  align-items: stretch;
}

.why_choose_blocks_inner > * {
  flex: 1;
  min-width: 250px;
  max-width: 350px;
}

.btn_wrap {
  text-align: center;
  margin-top: var(--spaceXl);
}

/* Variant: default - standard background */
.why-choose-widget--default {
  background: transparent;
}

/* Variant: light - light background */
.why-choose-widget--light {
  background: var(--surfaceSecondary);
  padding: var(--spaceXl) 0;
}

/* Variant: dark - dark background */
.why-choose-widget--dark {
  background: var(--surfaceTertiary);
  padding: var(--spaceXl) 0;
}

.why-choose-widget--dark .why_choose_title {
  color: var(--textInverse);
}

/* Responsive design matching WordPress patterns */
@media (max-width: 768px) {
  .why_choose_widget {
    padding: var(--spaceLg) 0 0;
    margin-bottom: var(--spaceXl);
  }
  
  .why_choose_title {
    font-size: 28px; /* Smaller on mobile */
    margin-bottom: var(--spaceXl);
    padding: 0 var(--spaceLg);
  }
  
  .why_choose_blocks_inner {
    flex-direction: column;
    gap: var(--spaceMd);
    padding: 0 var(--spaceLg);
  }
  
  .why_choose_blocks_inner > * {
    max-width: 100%;
    min-width: 100%;
  }
}

@media (max-width: 480px) {
  .why_choose_title {
    font-size: 24px;
  }
}

/* WordPress compatibility classes */
.widget {
  width: 100%;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--spaceLg);
}

@media (max-width: 1200px) {
  .container {
    max-width: 100%;
  }
}
</style>