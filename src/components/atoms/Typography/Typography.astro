---
/**
 * Typography Component
 * Hunter Galloway Design System - Atomic Component
 * 
 * A focused, single-responsibility typography component that ensures
 * consistent text styling across the application.
 * 
 * Atomic Design Principles:
 * - Single responsibility: Only handles typography styling
 * - Composable: Can be combined with other atoms
 * - Reusable: Consistent API across the system
 * - Token-driven: Uses design system tokens
 */

import type { TypographyProps } from './Typography.types';
import './Typography.css';

interface Props extends TypographyProps {}

const {
  element = 'p',
  size = 'md',
  color = 'primary',
  align = 'left',
  weight = 'body',
  noWrap = false,
  class: additionalClasses = '',
} = Astro.props;

// Build BEM-style CSS classes for atomic design
const sizeClass = size === '4.5xl' ? '4_5xl' : size;
const textClasses = [
  'hg-typography',
  `hg-typography--${sizeClass}`,
  `hg-typography--${weight}`,
  `hg-typography--${color}`,
  `hg-typography--${align}`,
  noWrap && 'hg-typography--nowrap',
  additionalClasses,
].filter(Boolean).join(' ');

// Dynamic component rendering for semantic HTML
const Element = element;
---

<Element class={textClasses}>
  <slot />
</Element>

<style>
/* Base typography component - follows atomic design principles */
.hg-typography {
  /* Base typography properties */
  font-family: var(--hg-font-family-body);
  margin: 0;
  padding: 0;
  
  /* Font smoothing for better readability */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* Default line height for body text */
  line-height: var(--hg-line-height-body);
  
  /* Ensure proper text rendering */
  text-rendering: optimizeLegibility;
}

/* Size variants - each size is a distinct atomic unit */
.hg-typography--xs { 
  font-size: var(--hg-font-size-xs);
  line-height: var(--hg-line-height-tight);
}
.hg-typography--sm { 
  font-size: var(--hg-font-size-sm);
  line-height: var(--hg-line-height-body);
}
.hg-typography--md { 
  font-size: var(--hg-font-size-md);
  line-height: var(--hg-line-height-body);
}
.hg-typography--lg { 
  font-size: var(--hg-font-size-lg);
  line-height: var(--hg-line-height-body);
}
.hg-typography--xl { 
  font-size: var(--hg-font-size-xl);
  line-height: var(--hg-line-height-tight);
}
.hg-typography--2xl { 
  font-size: var(--hg-font-size-2xl);
  line-height: var(--hg-line-height-tight);
}
.hg-typography--3xl { 
  font-size: var(--hg-font-size-3xl);
  line-height: var(--hg-line-height-tight);
}
.hg-typography--4xl { 
  font-size: var(--hg-font-size-4xl);
  line-height: var(--hg-line-height-tight);
}
.hg-typography--4_5xl { 
  font-size: var(--hg-font-size-4_5xl);
  line-height: var(--hg-line-height-tight);
}
.hg-typography--5xl { 
  font-size: var(--hg-font-size-5xl);
  line-height: var(--hg-line-height-tight);
}

/* Weight variants - each weight is a distinct atomic unit */
.hg-typography--body { font-weight: var(--hg-font-weight-body); }
.hg-typography--emphasis { font-weight: var(--hg-font-weight-emphasis); }
.hg-typography--strong { font-weight: var(--hg-font-weight-strong); }
.hg-typography--heading { font-weight: var(--hg-font-weight-heading); }
.hg-typography--bold { font-weight: var(--hg-font-weight-heading); }
.hg-typography--display { font-weight: var(--hg-font-weight-display); }

/* Color variants - each color is a distinct atomic unit */
.hg-typography--primary { color: var(--hg-color-text-primary); }
.hg-typography--secondary { color: var(--hg-color-text-secondary); }
.hg-typography--tertiary { color: var(--hg-color-text-tertiary); }
.hg-typography--inverse { color: var(--hg-color-text-inverse); }

/* Alignment variants - each alignment is a distinct atomic unit */
.hg-typography--left { text-align: left; }
.hg-typography--center { text-align: center; }
.hg-typography--right { text-align: right; }
.hg-typography--justify { text-align: justify; }

/* Utility variants - atomic utility classes */
.hg-typography--nowrap { white-space: nowrap; }

/* Responsive design - mobile-first approach */
@media (max-width: 768px) {
  /* Scale down large text on mobile for better readability */
  .hg-typography--4xl,
  .hg-typography--4_5xl,
  .hg-typography--5xl {
    font-size: var(--hg-font-size-3xl);
  }
  
  .hg-typography--3xl {
    font-size: var(--hg-font-size-2xl);
  }
  
  .hg-typography--2xl {
    font-size: var(--hg-font-size-xl);
  }
}

/* Print styles for accessibility */
@media print {
  .hg-typography {
    color: #000 !important;
    background: transparent !important;
  }
}
</style>